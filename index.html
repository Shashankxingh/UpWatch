<!DOCTYPE html>
<html lang="en" class="dark">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0"/>
<title>UpWatch</title>

<link href="https://fonts.googleapis.com/css2?family=Space+Grotesk:wght@300;400;600;700&display=swap" rel="stylesheet"/>
<script src="https://cdn.tailwindcss.com"></script>

<style>
body {
  background:#050A14;
  font-family: "Space Grotesk", sans-serif;
}
.glass {
  background: rgba(255,255,255,0.03);
  backdrop-filter: blur(22px);
  border: 1px solid rgba(255,255,255,0.08);
}
.shake { animation: shake .4s; }
@keyframes shake {
  0%,100%{transform:translateX(0)}
  25%{transform:translateX(-6px)}
  50%{transform:translateX(6px)}
  75%{transform:translateX(-4px)}
}
</style>
</head>

<body class="text-white min-h-screen p-6">

<h1 class="text-2xl font-bold mb-6">UpWatch</h1>

<div id="box" class="glass max-w-md mx-auto p-5 rounded-2xl space-y-3">

  <label class="text-xs text-white/60">
    Name <span class="text-red-400">*</span>
  </label>
  <input
    id="name"
    placeholder="My Telegram Bot"
    class="w-full bg-transparent border border-white/10 p-2 rounded outline-none"
  />

  <label class="text-xs text-white/60">
    URL <span class="text-red-400">*</span>
  </label>
  <input
    id="url"
    placeholder="https://my-bot.onrender.com"
    class="w-full bg-transparent border border-white/10 p-2 rounded outline-none"
  />

  <button
    id="btn"
    class="w-full bg-blue-500 hover:bg-blue-600 text-black font-semibold py-2 rounded transition"
  >
    Start Pinging
  </button>

  <p id="msg" class="text-sm text-white/60"></p>

</div>

<script>
/*
 WHY BACKEND URL IS HERE:
 Browser JS must know WHERE to send requests.
 This is how EVERY website works.
*/
const BACKEND_URL = "https://YOUR-BACKEND.onrender.com";

const btn = document.getElementById("btn");
const msg = document.getElementById("msg");
const box = document.getElementById("box");

btn.onclick = async () => {
  const name = document.getElementById("name").value.trim();
  const url = document.getElementById("url").value.trim();

  if (!name || !url || !url.startsWith("http")) {
    box.classList.add("shake");
    msg.textContent = "⭐ Name and valid URL are required";
    setTimeout(() => box.classList.remove("shake"), 400);
    return;
  }

  msg.textContent = "Starting keep-alive service…";

  try {
    const res = await fetch(BACKEND_URL + "/api/monitor", {
      method: "POST",
      headers: { "Content-Type": "application/json" },
      body: JSON.stringify({ name, url })
    });

    const data = await res.json();
    msg.textContent = data.message;
  } catch {
    msg.textContent = "❌ Backend not reachable";
  }
};
</script>

</body>
</html>